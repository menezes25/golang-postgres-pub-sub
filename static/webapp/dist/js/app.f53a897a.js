(function(e){function t(t){for(var r,a,c=t[0],i=t[1],l=t[2],d=0,p=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,c=1;c<n.length;c++){var i=n[c];0!==o[i]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h-full w-full pt-16 px-1 bg-gradient-to-r from-blueGrey to-cadetBlue",attrs:{id:"app"}},[n("div",{staticClass:"container mx-auto max-w-screen-lg rounded-lg bg-gray-100 bg-opacity-50"},[n("CardPostgresPubSub")],1)])},s=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pt-8 px-4 pb-12"},[n("h1",{staticClass:"text-gray-700 text-2xl font-light text-center mb-4"},[e._v("POC - Postgres PUB/SUB")]),n("div",{staticClass:"flex flex-col gap-y-1 md:grid md:grid-cols-2-1-1 md:gap-y-0 md:gap-x-1"},[n("div",{staticClass:"border border-white rounded-md p-4"},[n("h2",{staticClass:"text-gray-600 text-xl font-light text-center mb-2"},[e._v("Criar evento")]),n("div",{staticClass:"flex justify-center gap-x-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.event,expression:"event"}],staticClass:"input input--blue w-full max-w-xs flex-shrink",attrs:{type:"text",placeholder:"Nome do evento..."},domProps:{value:e.event},on:{input:function(t){t.target.composing||(e.event=t.target.value)}}}),n("button",{staticClass:"btn btn--blue",on:{click:function(t){return e.clickCreateEvent()}}},[e._v("Criar")])])]),n("CardEvent",{attrs:{color:"yellow",title:"Eventos em andamento",events:e.eventsInProgress}}),n("CardEvent",{attrs:{color:"green",title:"Eventos concluídos",events:e.completedEvents}})],1)])},c=[],i=n("1da1"),l=(n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-gray-600 rounded-md p-1 text-white"},[n("h2",{staticClass:"font-light text-center"},[e._v(" "+e._s(e.title)+" ")]),n("p",{staticClass:"font-thin"},[e._v("Total: "+e._s(e.events.length))]),n("ul",{staticClass:"my-4 list-disc list-inside pl-4",class:[e.cardEventColorClass]},e._l(e.events,(function(t,r){return n("li",{key:r},[e._v(" "+e._s(t)+" ")])})),0)])}),u=[],d=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),(new Map).set("yellow","list-marker-yellow").set("green","list-marker-green")),p={name:"CardEvent",props:{title:{type:String,required:!0},events:{type:Array,required:!0},color:{type:String,required:!0,validator:function(e){return d.has(e)}}},computed:{cardEventColorClass:function(){return d.get(this.color)}}},v=p,f=n("2877"),g=Object(f["a"])(v,l,u,!1,null,null,null),b=g.exports,h={debug:!0,state:{eventsInProgress:[],completedEvents:[]},addEventsInProgress:function(e){this.debug&&console.log("addEventsInProgress triggered with",e),this.state.eventsInProgress.push(e)},addCompletedEvents:function(e){this.debug&&console.log("addCompletedEvents triggered with",e),this.state.completedEvents.push(e)}},m=n("d4ec"),C=n("262e"),E=n("2caf"),w=n("9072"),x=(n("b0c0"),n("bc3a")),y=n.n(x),O=function(e){Object(C["a"])(n,e);var t=Object(E["a"])(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Object(m["a"])(this,n),r=t.call(this,e),r.name="ApiError",r.message=e,r.response=o,r.originalError=s,r}return n}(Object(w["a"])(Error)),S=y.a.create({baseURL:"http://localhost:8880"});function P(e){return k.apply(this,arguments)}function k(){return k=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.post("/api/event",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e["catch"](0),new O(e.t0.message,null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.data,e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),k.apply(this,arguments)}var _={saveNewEvent:P},j={name:"CardPostgresPubSub",components:{CardEvent:b},data:function(){return{sharedState:h.state,event:""}},computed:{eventsInProgress:function(){return this.sharedState.eventsInProgress},completedEvents:function(){return this.sharedState.completedEvents}},methods:{clickCreateEvent:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.saveNewEvent({event:e.event});case 3:n=t.sent,console.debug("ok! Evento criado!",{response:n}),e.event="",t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.debug("Erro ao criar evento",{error:t.t0});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},N=j,W=Object(f["a"])(N,a,c,!1,null,null,null),B=W.exports,T={name:"App",components:{CardPostgresPubSub:B}},I=T,R=Object(f["a"])(I,o,s,!1,null,null,null),J=R.exports,K=(n("99af"),n("3d20")),L=n.n(K),M="ws://localhost:8880",G=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function D(){console.info("[WEBSOCKET] Conexão estabilizada"),L.a.fire({icon:"success",titleText:"WS Conexão estabilizada",toast:!0,position:"top-end",showConfirmButton:!1,showCloseButton:!0})}function $(e){var t;try{t=JSON.parse(e.data)}catch(n){return void console.error("[WEBSOCKET] Dados não JSON recebidos do servidor:",e.data,n)}console.info("[WEBSOCKET] Dados JSON recebidos do servidor:",JSON.parse(e.data)),h.addEventsInProgress(t)}function q(e){return A.apply(this,arguments)}function A(){return A=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.wasClean?console.debug("[WEBSOCKET] Conexão fechada corretamente, código: ".concat(t.code,", motivo: ").concat(t.reason)):console.debug("[WEBSOCKET] Conexão fechada por erro de rede, código: ".concat(t.code,", motivo: ").concat(t.reason)),e.next=3,G(1e4);case 3:z();case 4:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function U(e){console.debug("[WEBSOCKET] Error:",e);var t=(new Map).set(WebSocket.CONNECTING,"CONNECTING").set(WebSocket.OPEN,"OPEN").set(WebSocket.CLOSING,"CLOSING").set(WebSocket.CLOSED,"CLOSED");L.a.fire({icon:"error",titleText:"WS Error: state ".concat(t.get(e.srcElement.readyState)),toast:!0,position:"top-end",showConfirmButton:!1,showCloseButton:!0})}function z(){var e=new WebSocket("".concat(M,"/ws/topic?listen=boleto,event"));return e.onopen=D,e.onmessage=$,e.onclose=q,e.onerror=U,L.a.fire({title:"WS Conectando...",toast:!0,position:"top-end",showConfirmButton:!1,showCloseButton:!0}),L.a.showLoading(),e}var F={startWebSocket:z};n("034b");F.startWebSocket(),r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(J)}}).$mount("#app")}});
//# sourceMappingURL=app.f53a897a.js.map